#include "mj63.h"
#include "config.h"
#include "is31fl3741.h"

#include <print.h>





























































































const is31_led g_is31_leds[DRIVER_LED_TOTAL] = {
    {0,  9, 1,  8, 1,  7, 1}, /* RGB1 */
    {0,  9, 2,  8, 2,  7, 2}, /* RGB2 */
    {0,  9, 3,  8, 3,  7, 3}, /* RGB3 */
    {0,  9, 4,  8, 4,  7, 4}, /* RGB4 */
    {0,  9, 5,  8, 5,  7, 5}, /* RGB5 */
    {0,  9, 6,  8, 6,  7, 6}, /* RGB6 */
    {0,  9, 7,  8, 7,  7, 7}, /* RGB7 */
    {0,  9, 8,  8, 8,  7, 8}, /* RGB8 */
    {0,  9, 9,  8, 9,  7, 9}, /* RGB9 */
    {0, 12, 1, 11, 1, 10, 1}, /* RGB10 */
    {0, 12, 2, 11, 2, 10, 2}, /* RGB11 */
    {0, 12, 3, 11, 3, 10, 3}, /* RGB12 */
    {0, 12, 4, 11, 4, 10, 4}, /* RGB13 */
    {0, 12, 5, 11, 5, 10, 5}, /* RGB14 */
    {0, 12, 6, 11, 6, 10, 6}, /* RGB15 */
    {0, 12, 7, 11, 7, 10, 7}, /* RGB16 */
    {0, 12, 8, 11, 8, 10, 8}, /* RGB17 */
    {0, 12, 9, 11, 9, 10, 9}, /* RGB18 */
    {0, 15, 1, 14, 1, 13, 1}, /* RGB19 */
    {0, 15, 2, 14, 2, 13, 2}, /* RGB20 */
    {0, 15, 3, 14, 3, 13, 3}, /* RGB21 */
    {0, 15, 4, 14, 4, 13, 4}, /* RGB22 */
    {0, 15, 5, 14, 5, 13, 5}, /* RGB23 */
    {0, 15, 6, 14, 6, 13, 6}, /* RGB24 */
    {0, 15, 7, 14, 7, 13, 7}, /* RGB25 */
    {0, 15, 8, 14, 8, 13, 8}, /* RGB26 */
    {0, 15, 9, 14, 9, 13, 9}, /* RGB27 */
    {0, 18, 1, 17, 1, 16, 1}, /* RGB28 */
    {0, 18, 2, 17, 2, 16, 2}, /* RGB29 */
    {0, 18, 3, 17, 3, 16, 3}, /* RGB30 */
    {0, 18, 4, 17, 4, 16, 4}, /* RGB31 */
    {0, 18, 5, 17, 5, 16, 5}, /* RGB32 */
    {0, 18, 6, 17, 6, 16, 6}, /* RGB33 */
    {0, 18, 7, 17, 7, 16, 7}, /* RGB34 */
    {0, 18, 8, 17, 8, 16, 8}, /* RGB35 */
    {0, 18, 9, 17, 9, 16, 9}, /* RGB36 */
    {0, 21, 1, 20, 1, 19, 1}, /* RGB37 */
    {0, 21, 2, 20, 2, 19, 2}, /* RGB38 */
    {0, 21, 3, 20, 3, 19, 3}, /* RGB39 */
    {0, 21, 4, 20, 4, 19, 4}, /* RGB40 */
    {0, 21, 5, 20, 5, 19, 5}, /* RGB41 */
    {0, 21, 6, 20, 6, 19, 6}, /* RGB42 */
    {0, 21, 7, 20, 7, 19, 7}, /* RGB43 */
    {0, 21, 8, 20, 8, 19, 8}, /* RGB44 */
    {0, 24, 1, 23, 1, 22, 1}, /* RGB46 */
	{0, 24, 2, 23, 2, 22, 2}, /* RGB47 */
    {0, 24, 3, 23, 3, 22, 3}, /* RGB48 */
	{0, 24, 4, 23, 4, 22, 4}, /* RGB49 */
	{0, 24, 5, 23, 5, 22, 5}, /* RGB50 */
    {0, 24, 6, 23, 6, 22, 6}, /* RGB51 */
    {0, 24, 7, 23, 7, 22, 7}, /* RGB52 */
    {0, 24, 8, 23, 8, 22, 8}, /* RGB53 */
    {0, 24, 9, 23, 9, 22, 9}, /* RGB54 */
    {0, 30, 2, 29, 2, 28, 2}, /* RGB55 */
    {0, 27, 2, 26, 2, 25, 2}, /* RGB56 */
	{0, 27, 3, 26, 3, 25, 3}, /* RGB57 */
    {0, 27, 4, 26, 4, 25, 4}, /* RGB58 */
    {0, 27, 5, 26, 5, 25, 5}, /* RGB59 */
    {0, 27, 6, 26, 6, 25, 6}, /* RGB60 */
    {0, 30, 7, 29, 7, 28, 7}, /* RGB61 */
    {0, 30, 8, 29, 8, 28, 8}, /* RGB62 */
    {0, 30, 9, 29, 9, 28, 9}, /* RGB63 */
    {0, 30, 1, 29, 1, 28, 1}, /* RGB64 */
    {0, 27, 1, 26, 1, 25, 1}, /* RGB65 */
    {0, 30, 5, 29, 5, 28, 5}, /* RGB66 */
};

led_config_t g_led_config = {
	{
		/* C0     C1         C2        C3        C4        C5        C6        C7        C8          C9        C10         C11        C12        C13  */
		{  0,      1,         2,        3,        4,        5,        6,        7,        8,          9,        10,         11,       12,        13     }, /* R0 */
		{ 27,     26,        25,       24,       23,       22,       21,       20,       19,         18,        17,         16,       15,        14     }, /* R1 */
		{ 28,     29,        30,       31,       32,       33,       34,       35,       36,         37,        38,         39,       40,        NO_LED }, /* R2 */
		{ 53,     NO_LED,    52,       51,       50,       49,       48,       47,       46,         45,        44,         43,       42,        41     }, /* R3 */
		{ 61,     60,        59,       NO_LED,   64,       62,       63,       NO_LED,   NO_LED,     58,        57,         56,       55,        54     }, /* R4 */
    }, {
        {0, 0},   {16, 0},   {32, 0},  {48, 0},  {64, 0},  {80, 0},  {96, 0},  {112, 0},  {128, 0},  {144, 0},  {160, 0},  {176, 0},  {192, 0},  {208, 0},
		{0, 16},  {16, 16},  {32, 16}, {48, 16}, {64, 16}, {80, 16}, {96, 16}, {112, 16}, {128, 16}, {144, 16}, {160, 16}, {176, 16}, {192, 16}, {208, 16},
		{0, 32},  {16, 32},  {32, 32}, {48, 32}, {64, 32}, {80, 32}, {96, 32}, {112, 32}, {128, 32}, {144, 32}, {160, 32}, {176, 32}, {192, 32},
		{0, 48},             {16, 48},  {32, 48}, {48, 48}, {64, 48}, {80, 48}, {96, 48}, {112, 48}, {128, 48}, {144, 48}, {160, 48}, {176, 48}, {192, 48},
		{0, 64},  {16, 64},  {32, 64},           {48, 64}, {64, 64}, {80, 64},                       {96, 64},  {112, 64}, {128, 64}, {144, 64}, {160, 64},
	}, {
	       4,      4,         4,        4,        4,        4,        4,        4,         4,         4,         4,          4,        4,        4, 
		   4,      4,         4,        4,        4,        4,        4,        4,         4,         4,         4,          4,        4,        4,
		   4,      4,         4,        4,        4,        4,        4,        4,         4,         4,         4,          4,        4,
		   4,                 4,        4,        4,        4,        4,        4,         4,         4,         4,          4,        4,        4,
		   4,      4,         4,                  4,        4,        4,                              4,         4,          4,        4,        4,
	}
};

void matrix_init_kb(void) {
    matrix_init_user();
}

void matrix_scan_kb(void) { matrix_scan_user(); }

bool process_record_kb(uint16_t keycode, keyrecord_t *record) { return process_record_user(keycode, record); }

void suspend_power_down_kb(void) {
    rgb_matrix_set_suspend_state(true);
    suspend_power_down_user();
}

void suspend_wakeup_init_kb(void) {
    rgb_matrix_set_suspend_state(false);
    suspend_wakeup_init_user();
}

void matrix_setup(void) {
	palSetPadMode(GPIOA, 2, PAL_MODE_OUTPUT_PUSHPULL);
	palSetPad(GPIOA, 2);
	//palClearPad(GPIOA, 2);
}
